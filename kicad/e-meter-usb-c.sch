EESchema Schematic File Version 4
EELAYER 30 0
EELAYER END
$Descr A4 11693 8268
encoding utf-8
Sheet 1 1
Title "Electricity meter HAN reader"
Date "2021-08-19"
Rev "1"
Comp ""
Comment1 ""
Comment2 ""
Comment3 ""
Comment4 ""
$EndDescr
Wire Wire Line
	1650 3700 1800 3700
Wire Wire Line
	1650 3600 1800 3600
Wire Wire Line
	1650 3300 1800 3300
Text Label 1800 3700 0    50   ~ 0
HAN_VCC
Text Label 1800 3600 0    50   ~ 0
HAN_DATA_REQ
NoConn ~ 1650 3400
Text Label 1800 3300 0    50   ~ 0
HAN_DATA
$Comp
L power:GND #PWR03
U 1 1 60EB5B76
P 1800 3200
F 0 "#PWR03" H 1800 2950 50  0001 C CNN
F 1 "GND" V 1805 3072 50  0000 R CNN
F 2 "" H 1800 3200 50  0001 C CNN
F 3 "" H 1800 3200 50  0001 C CNN
	1    1800 3200
	0    -1   -1   0   
$EndComp
Wire Wire Line
	1650 3200 1800 3200
$Comp
L Connector:TestPoint TP5
U 1 1 60EC470A
P 1700 5450
F 0 "TP5" V 1700 5638 50  0000 L CNN
F 1 "TestPoint" V 1745 5638 50  0001 L CNN
F 2 "TestPoint:TestPoint_Pad_D1.0mm" H 1900 5450 50  0001 C CNN
F 3 "~" H 1900 5450 50  0001 C CNN
F 4 "0" V 1700 5450 50  0001 C CNN "JLCPCB BOM"
	1    1700 5450
	0    1    1    0   
$EndComp
Wire Wire Line
	1700 5450 1400 5450
Text Label 3600 3100 0    50   ~ 0
HAN_DATA_REQ
Text Label 2950 3100 2    50   ~ 0
HAN_VCC
$Comp
L power:GND #PWR016
U 1 1 60F1AE0A
P 7550 5600
F 0 "#PWR016" H 7550 5350 50  0001 C CNN
F 1 "GND" H 7555 5427 50  0000 C CNN
F 2 "" H 7550 5600 50  0001 C CNN
F 3 "" H 7550 5600 50  0001 C CNN
	1    7550 5600
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR012
U 1 1 60F25363
P 5200 1500
F 0 "#PWR012" H 5200 1250 50  0001 C CNN
F 1 "GND" H 5205 1327 50  0000 C CNN
F 2 "" H 5200 1500 50  0001 C CNN
F 3 "" H 5200 1500 50  0001 C CNN
	1    5200 1500
	1    0    0    -1  
$EndComp
Wire Wire Line
	6250 4100 6250 4200
$Comp
L power:GND #PWR014
U 1 1 60F474C8
P 6250 4200
F 0 "#PWR014" H 6250 3950 50  0001 C CNN
F 1 "GND" H 6255 4027 50  0000 C CNN
F 2 "" H 6250 4200 50  0001 C CNN
F 3 "" H 6250 4200 50  0001 C CNN
	1    6250 4200
	1    0    0    -1  
$EndComp
$Comp
L power:+3V3 #PWR010
U 1 1 60F608DB
P 3950 1200
F 0 "#PWR010" H 3950 1050 50  0001 C CNN
F 1 "+3V3" H 3965 1373 50  0000 C CNN
F 2 "" H 3950 1200 50  0001 C CNN
F 3 "" H 3950 1200 50  0001 C CNN
	1    3950 1200
	0    1    1    0   
$EndComp
$Comp
L power:GND #PWR06
U 1 1 60F61F05
P 2750 1950
F 0 "#PWR06" H 2750 1700 50  0001 C CNN
F 1 "GND" H 2755 1777 50  0000 C CNN
F 2 "" H 2750 1950 50  0001 C CNN
F 3 "" H 2750 1950 50  0001 C CNN
	1    2750 1950
	1    0    0    -1  
$EndComp
$Comp
L Device:C C2
U 1 1 60F62BAC
P 3200 1600
F 0 "C2" H 3315 1646 50  0000 L CNN
F 1 "470p" H 3315 1555 50  0000 L CNN
F 2 "Capacitor_SMD:C_0603_1608Metric_Pad1.08x0.95mm_HandSolder" H 3238 1450 50  0001 C CNN
F 3 "~" H 3200 1600 50  0001 C CNN
F 4 "C1620" H 3200 1600 50  0001 C CNN "LCSC Part"
	1    3200 1600
	1    0    0    -1  
$EndComp
$Comp
L Device:C C1
U 1 1 60F6E80D
P 1900 1600
F 0 "C1" H 2015 1646 50  0000 L CNN
F 1 "10u" H 2015 1555 50  0000 L CNN
F 2 "Capacitor_SMD:C_0603_1608Metric_Pad1.08x0.95mm_HandSolder" H 1938 1450 50  0001 C CNN
F 3 "~" H 1900 1600 50  0001 C CNN
F 4 "C19702" H 1900 1600 50  0001 C CNN "LCSC Part"
	1    1900 1600
	1    0    0    -1  
$EndComp
Wire Wire Line
	2100 1200 2100 1300
$Comp
L power:GND #PWR05
U 1 1 60F92B27
P 1900 1950
F 0 "#PWR05" H 1900 1700 50  0001 C CNN
F 1 "GND" H 1905 1777 50  0000 C CNN
F 2 "" H 1900 1950 50  0001 C CNN
F 3 "" H 1900 1950 50  0001 C CNN
	1    1900 1950
	1    0    0    -1  
$EndComp
Wire Wire Line
	2750 1600 2750 1950
$Comp
L power:GND #PWR08
U 1 1 60F9F59C
P 3200 1950
F 0 "#PWR08" H 3200 1700 50  0001 C CNN
F 1 "GND" H 3205 1777 50  0000 C CNN
F 2 "" H 3200 1950 50  0001 C CNN
F 3 "" H 3200 1950 50  0001 C CNN
	1    3200 1950
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR017
U 1 1 60FFC8AD
P 10150 2950
F 0 "#PWR017" H 10150 2700 50  0001 C CNN
F 1 "GND" H 10155 2777 50  0000 C CNN
F 2 "" H 10150 2950 50  0001 C CNN
F 3 "" H 10150 2950 50  0001 C CNN
	1    10150 2950
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR019
U 1 1 61009BBA
P 8150 3050
F 0 "#PWR019" H 8150 2800 50  0001 C CNN
F 1 "GND" H 8155 2877 50  0000 C CNN
F 2 "" H 8150 3050 50  0001 C CNN
F 3 "" H 8150 3050 50  0001 C CNN
	1    8150 3050
	1    0    0    -1  
$EndComp
Text Label 8750 2250 0    50   ~ 0
USB_D+
Text Label 8750 2150 0    50   ~ 0
USB_D-
Text Label 8750 1550 0    50   ~ 0
USB_VBUS
Text Label 9750 2150 2    50   ~ 0
USB_D+
Text Label 9750 2250 2    50   ~ 0
USB_D-
NoConn ~ 9750 1950
Wire Wire Line
	5200 1450 5200 1500
$Comp
L Connector:TestPoint TP7
U 1 1 610FA411
P 1700 5850
F 0 "TP7" V 1700 6038 50  0000 L CNN
F 1 "TestPoint" V 1745 6038 50  0001 L CNN
F 2 "TestPoint:TestPoint_Pad_D1.0mm" H 1900 5850 50  0001 C CNN
F 3 "~" H 1900 5850 50  0001 C CNN
F 4 "0" V 1700 5850 50  0001 C CNN "JLCPCB BOM"
	1    1700 5850
	0    1    1    0   
$EndComp
Wire Wire Line
	1700 5850 1400 5850
Text Label 1400 5850 2    50   ~ 0
HAN_TO_ESP
$Comp
L power:+3V3 #PWR02
U 1 1 610FB60E
P 1400 5450
F 0 "#PWR02" H 1400 5300 50  0001 C CNN
F 1 "+3V3" H 1415 5623 50  0000 C CNN
F 2 "" H 1400 5450 50  0001 C CNN
F 3 "" H 1400 5450 50  0001 C CNN
	1    1400 5450
	0    -1   -1   0   
$EndComp
$Comp
L Device:C C3
U 1 1 6112D1DC
P 3700 1600
F 0 "C3" H 3815 1646 50  0000 L CNN
F 1 "2.2u" H 3815 1555 50  0000 L CNN
F 2 "Capacitor_SMD:C_0603_1608Metric_Pad1.08x0.95mm_HandSolder" H 3738 1450 50  0001 C CNN
F 3 "~" H 3700 1600 50  0001 C CNN
F 4 "C23630" H 3700 1600 50  0001 C CNN "LCSC Part"
	1    3700 1600
	1    0    0    -1  
$EndComp
Wire Wire Line
	3700 1450 3700 1200
Connection ~ 3700 1200
Wire Wire Line
	3700 1200 3950 1200
Text Label 10550 1850 0    50   ~ 0
ESP_TO_UART
Text Label 10550 1950 0    50   ~ 0
ESP_FROM_UART
Text Label 5650 1500 2    50   ~ 0
ESP_EN
Text Label 6850 1600 0    50   ~ 0
ESP_TO_UART
Text Label 6850 1800 0    50   ~ 0
ESP_FROM_UART
Text Label 6850 1500 0    50   ~ 0
ESP_IO0
Text Label 8000 4850 0    50   ~ 0
ESP_EN
Wire Wire Line
	9100 5400 9350 5400
Wire Wire Line
	9100 4650 9250 4650
Text Label 10500 5750 0    50   ~ 0
ESP_IO0
Wire Wire Line
	10200 5750 10500 5750
Wire Wire Line
	10200 5600 10200 5750
Wire Wire Line
	9250 4650 9450 4650
Connection ~ 9250 4650
Wire Wire Line
	9250 5100 10200 5100
Wire Wire Line
	9250 4650 9250 5100
Wire Wire Line
	9350 5400 9450 5400
Connection ~ 9350 5400
Wire Wire Line
	9350 4950 9350 5400
Wire Wire Line
	10200 4950 9350 4950
Wire Wire Line
	10200 4850 10200 4950
Text Label 10500 4350 0    50   ~ 0
ESP_EN
Wire Wire Line
	10200 5200 10200 5100
Wire Wire Line
	9750 5400 9900 5400
$Comp
L Transistor_BJT:S8050 Q4
U 1 1 6118E1B0
P 10100 5400
F 0 "Q4" H 10290 5354 50  0000 L CNN
F 1 "S8050" H 10290 5445 50  0000 L CNN
F 2 "Package_TO_SOT_SMD:SOT-23" H 10300 5325 50  0001 L CIN
F 3 "http://www.unisonic.com.tw/datasheet/S8050.pdf" H 10100 5400 50  0001 L CNN
	1    10100 5400
	1    0    0    1   
$EndComp
Text Label 9100 5400 2    50   ~ 0
UART_RTS
$Comp
L Device:R_US R6
U 1 1 6118E1A9
P 9600 5400
F 0 "R6" V 9700 5400 50  0000 C CNN
F 1 "10k" V 9800 5400 50  0000 C CNN
F 2 "Resistor_SMD:R_0603_1608Metric_Pad0.98x0.95mm_HandSolder" V 9640 5390 50  0001 C CNN
F 3 "~" H 9600 5400 50  0001 C CNN
F 4 "C25804" V 9600 5400 50  0001 C CNN "LCSC Part"
	1    9600 5400
	0    1    1    0   
$EndComp
Wire Wire Line
	10200 4350 10500 4350
Wire Wire Line
	10200 4450 10200 4350
Wire Wire Line
	9750 4650 9900 4650
$Comp
L Transistor_BJT:S8050 Q3
U 1 1 61174F54
P 10100 4650
F 0 "Q3" H 10290 4696 50  0000 L CNN
F 1 "S8050" H 10290 4605 50  0000 L CNN
F 2 "Package_TO_SOT_SMD:SOT-23" H 10300 4575 50  0001 L CIN
F 3 "http://www.unisonic.com.tw/datasheet/S8050.pdf" H 10100 4650 50  0001 L CNN
F 4 "C2150" H 10100 4650 50  0001 C CNN "LCSC Part"
	1    10100 4650
	1    0    0    -1  
$EndComp
Text Label 9100 4650 2    50   ~ 0
UART_DTR
$Comp
L Device:R_US R5
U 1 1 6115D311
P 9600 4650
F 0 "R5" V 9700 4650 50  0000 C CNN
F 1 "10k" V 9800 4650 50  0000 C CNN
F 2 "Resistor_SMD:R_0603_1608Metric_Pad0.98x0.95mm_HandSolder" V 9640 4640 50  0001 C CNN
F 3 "~" H 9600 4650 50  0001 C CNN
F 4 "C25804" V 9600 4650 50  0001 C CNN "LCSC Part"
	1    9600 4650
	0    1    1    0   
$EndComp
$Comp
L RF_Module:ESP32-WROOM-32 U2
U 1 1 612A9AEF
P 6250 2700
F 0 "U2" H 6250 4550 50  0000 C CNN
F 1 "ESP32-WROOM-32" H 6250 4450 50  0000 C CNN
F 2 "RF_Module:ESP32-WROOM-32" H 6250 1200 50  0001 C CNN
F 3 "https://www.espressif.com/sites/default/files/documentation/esp32-wroom-32_datasheet_en.pdf" H 5950 2750 50  0001 C CNN
F 4 "C82899" H 6250 2700 50  0001 C CNN "LCSC Part"
	1    6250 2700
	1    0    0    -1  
$EndComp
Wire Wire Line
	3550 5400 3350 5400
$Comp
L power:+3V3 #PWR07
U 1 1 61319C05
P 3050 4650
F 0 "#PWR07" H 3050 4500 50  0001 C CNN
F 1 "+3V3" H 3065 4823 50  0000 C CNN
F 2 "" H 3050 4650 50  0001 C CNN
F 3 "" H 3050 4650 50  0001 C CNN
	1    3050 4650
	1    0    0    -1  
$EndComp
$Comp
L Device:R_US R4
U 1 1 61353540
P 3850 4850
F 0 "R4" V 3645 4850 50  0000 C CNN
F 1 "10k" V 3736 4850 50  0000 C CNN
F 2 "Resistor_SMD:R_0603_1608Metric_Pad0.98x0.95mm_HandSolder" V 3890 4840 50  0001 C CNN
F 3 "~" H 3850 4850 50  0001 C CNN
F 4 "C25804" V 3850 4850 50  0001 C CNN "LCSC Part"
	1    3850 4850
	-1   0    0    1   
$EndComp
Text Label 4100 5100 0    50   ~ 0
HAN_TO_ESP
$Comp
L Transistor_BJT:S8050 Q1
U 1 1 61189A03
P 3750 5400
F 0 "Q1" H 3940 5446 50  0000 L CNN
F 1 "S8050" H 3940 5355 50  0000 L CNN
F 2 "Package_TO_SOT_SMD:SOT-23" H 3950 5325 50  0001 L CIN
F 3 "http://www.unisonic.com.tw/datasheet/S8050.pdf" H 3750 5400 50  0001 L CNN
	1    3750 5400
	1    0    0    -1  
$EndComp
Text Notes 2950 7000 0    39   Italic 0
ESP32 Low Level Input voltage is \n0.25xVDD, about 0.8 V
Text Label 3200 5400 2    50   ~ 0
HAN_DATA
Wire Wire Line
	3350 5000 3350 5400
Connection ~ 3350 5400
Wire Wire Line
	4100 5100 3850 5100
Wire Wire Line
	3850 5100 3850 5200
Wire Wire Line
	3850 4650 3850 4700
Wire Wire Line
	3850 5000 3850 5100
Connection ~ 3850 5100
Wire Wire Line
	3850 5600 3850 5700
$Comp
L power:GND #PWR09
U 1 1 6138462E
P 3850 5700
F 0 "#PWR09" H 3850 5450 50  0001 C CNN
F 1 "GND" V 3855 5572 50  0000 R CNN
F 2 "" H 3850 5700 50  0001 C CNN
F 3 "" H 3850 5700 50  0001 C CNN
	1    3850 5700
	1    0    0    -1  
$EndComp
$Comp
L Connector:TestPoint TP6
U 1 1 6127F2FA
P 1700 5650
F 0 "TP6" V 1700 5838 50  0000 L CNN
F 1 "TestPoint" V 1745 5838 50  0001 L CNN
F 2 "TestPoint:TestPoint_Pad_D1.0mm" H 1900 5650 50  0001 C CNN
F 3 "~" H 1900 5650 50  0001 C CNN
F 4 "0" V 1700 5650 50  0001 C CNN "JLCPCB BOM"
	1    1700 5650
	0    1    1    0   
$EndComp
Wire Wire Line
	1700 5650 1400 5650
Text Label 1400 5650 2    50   ~ 0
HAN_DATA
Wire Wire Line
	3200 5400 3350 5400
Text Notes 2950 6800 0    39   Italic 0
HAN_DATA is an open collector that \nis normally closed.\nClosed (1): HAN_DATA is low and \nsinks about 3 mA. \nRX will be close to +3.3 V.\nOpen (0): HAN_DATA becomes high, \nabout 2 mA goes into the base of \nthe transistor (V_BE sat is 1.2 V). \nTransistor will open and collector \nwill sink about 3 mA. \nRX will be around +0.5 V \n(V_CE sat is 0.5 V).\n
Text Label 1300 1050 2    50   ~ 0
HAN_VCC
Text Label 1300 1400 2    50   ~ 0
USB_VBUS
$Comp
L Diode:B140-E3 D1
U 1 1 61213427
P 1550 1050
F 0 "D1" H 1550 833 50  0000 C CNN
F 1 "MDD-SS14" H 1550 924 50  0000 C CNN
F 2 "Diode_SMD:D_SMA" H 1550 875 50  0001 C CNN
F 3 "http://www.vishay.com/docs/88946/b120.pdf" H 1550 1050 50  0001 C CNN
F 4 "C2480" H 1550 1050 50  0001 C CNN "LCSC Part"
	1    1550 1050
	-1   0    0    1   
$EndComp
$Comp
L Diode:B140-E3 D2
U 1 1 6121641E
P 1550 1400
F 0 "D2" H 1550 1183 50  0000 C CNN
F 1 "MDD-SS14" H 1550 1274 50  0000 C CNN
F 2 "Diode_SMD:D_SMA" H 1550 1225 50  0001 C CNN
F 3 "http://www.vishay.com/docs/88946/b120.pdf" H 1550 1400 50  0001 C CNN
	1    1550 1400
	-1   0    0    1   
$EndComp
Wire Wire Line
	1300 1050 1400 1050
Wire Wire Line
	1300 1400 1400 1400
Wire Wire Line
	1700 1400 1700 1200
Connection ~ 1700 1200
Wire Wire Line
	1700 1200 1700 1050
Wire Wire Line
	1700 1200 1900 1200
Wire Wire Line
	1900 1750 1900 1950
Wire Wire Line
	1900 1450 1900 1200
Connection ~ 1900 1200
Wire Wire Line
	1900 1200 2000 1200
Wire Wire Line
	1650 3500 1800 3500
$Comp
L power:GND #PWR04
U 1 1 60EB08AA
P 1800 3500
F 0 "#PWR04" H 1800 3250 50  0001 C CNN
F 1 "GND" V 1805 3372 50  0000 R CNN
F 2 "" H 1800 3500 50  0001 C CNN
F 3 "" H 1800 3500 50  0001 C CNN
	1    1800 3500
	0    -1   -1   0   
$EndComp
Text Notes 850  2750 0    50   ~ 0
RJ12 connector for HAN port
Text Notes 2850 2750 0    50   ~ 0
Request data from HAN port
$Comp
L Connector:TestPoint TP1
U 1 1 612CF110
P 1700 4700
F 0 "TP1" V 1700 4888 50  0000 L CNN
F 1 "TestPoint" V 1745 4888 50  0001 L CNN
F 2 "TestPoint:TestPoint_Pad_D1.0mm" H 1900 4700 50  0001 C CNN
F 3 "~" H 1900 4700 50  0001 C CNN
F 4 "False" V 1700 4700 50  0001 C CNN "JLCPCB BOM"
	1    1700 4700
	0    1    1    0   
$EndComp
Wire Wire Line
	1700 4700 1400 4700
$Comp
L power:GND #PWR01
U 1 1 612D2223
P 1400 4700
F 0 "#PWR01" H 1400 4450 50  0001 C CNN
F 1 "GND" V 1405 4572 50  0000 R CNN
F 2 "" H 1400 4700 50  0001 C CNN
F 3 "" H 1400 4700 50  0001 C CNN
	1    1400 4700
	0    1    1    0   
$EndComp
Wire Wire Line
	3850 4650 3350 4650
Wire Wire Line
	3350 4650 3350 4700
$Comp
L Device:R_US R2
U 1 1 6132E786
P 3350 4850
F 0 "R2" V 3145 4850 50  0000 C CNN
F 1 "4.7k" V 3236 4850 50  0000 C CNN
F 2 "Resistor_SMD:R_0603_1608Metric_Pad0.98x0.95mm_HandSolder" V 3390 4840 50  0001 C CNN
F 3 "~" H 3350 4850 50  0001 C CNN
F 4 "C23162" V 3350 4850 50  0001 C CNN "LCSC Part"
	1    3350 4850
	1    0    0    -1  
$EndComp
Wire Wire Line
	3050 4650 3350 4650
Connection ~ 3350 4650
Text Notes 3150 4300 0    50   ~ 0
Invert HAN_DATA
Text Notes 7850 950  0    50   ~ 0
USB-C connector for \nprogramming and debugging
Text Notes 9850 850  0    50   ~ 0
USB-UART converter
Text Notes 5900 700  0    50   ~ 0
MCU with WiFi (ESP32)
Text Notes 2500 650  0    50   ~ 0
Power
Text Notes 1400 4350 0    50   ~ 0
Testpoints
Text Notes 7250 4150 0    50   ~ 0
Reset MCU with a button
Text Notes 9450 3900 0    50   ~ 0
Reset and flash MCU\nthrough USB port
$Comp
L Connector:TestPoint TP4
U 1 1 612C5AB3
P 1700 5250
F 0 "TP4" V 1700 5438 50  0000 L CNN
F 1 "TestPoint" V 1745 5438 50  0001 L CNN
F 2 "TestPoint:TestPoint_Pad_D1.0mm" H 1900 5250 50  0001 C CNN
F 3 "~" H 1900 5250 50  0001 C CNN
F 4 "0" V 1700 5250 50  0001 C CNN "JLCPCB BOM"
	1    1700 5250
	0    1    1    0   
$EndComp
Text Label 1400 5250 2    50   ~ 0
USB_VBUS
Wire Wire Line
	1700 5250 1400 5250
Text Label 1400 5100 2    50   ~ 0
HAN_VCC
Wire Wire Line
	1700 5100 1400 5100
$Comp
L Connector:TestPoint TP3
U 1 1 60EA7059
P 1700 5100
F 0 "TP3" V 1700 5288 50  0000 L CNN
F 1 "TestPoint" V 1745 5288 50  0001 L CNN
F 2 "TestPoint:TestPoint_Pad_D1.0mm" H 1900 5100 50  0001 C CNN
F 3 "~" H 1900 5100 50  0001 C CNN
F 4 "0" V 1700 5100 50  0001 C CNN "JLCPCB BOM"
	1    1700 5100
	0    1    1    0   
$EndComp
Text Label 1400 4900 2    50   ~ 0
VCC
Wire Wire Line
	1700 4900 1400 4900
$Comp
L Connector:TestPoint TP2
U 1 1 6151085C
P 1700 4900
F 0 "TP2" V 1700 5088 50  0000 L CNN
F 1 "TestPoint" V 1745 5088 50  0001 L CNN
F 2 "TestPoint:TestPoint_Pad_D1.0mm" H 1900 4900 50  0001 C CNN
F 3 "~" H 1900 4900 50  0001 C CNN
F 4 "False" V 1700 4900 50  0001 C CNN "JLCPCB BOM"
	1    1700 4900
	0    1    1    0   
$EndComp
NoConn ~ 5650 2700
NoConn ~ 5650 2800
NoConn ~ 5650 2900
NoConn ~ 5650 3000
NoConn ~ 5650 3100
NoConn ~ 5650 3200
NoConn ~ 5650 1700
NoConn ~ 5650 1800
NoConn ~ 6850 1900
NoConn ~ 6850 2000
NoConn ~ 6850 2300
NoConn ~ 6850 2400
NoConn ~ 6850 2600
NoConn ~ 6850 2700
NoConn ~ 6850 2800
NoConn ~ 6850 2900
NoConn ~ 6850 3000
$Comp
L Device:C C4
U 1 1 60F229FE
P 5200 1300
F 0 "C4" H 5315 1346 50  0000 L CNN
F 1 "0.1u" H 5315 1255 50  0000 L CNN
F 2 "Capacitor_SMD:C_0603_1608Metric_Pad1.08x0.95mm_HandSolder" H 5238 1150 50  0001 C CNN
F 3 "~" H 5200 1300 50  0001 C CNN
F 4 "C14663" H 5200 1300 50  0001 C CNN "LCSC Part"
	1    5200 1300
	1    0    0    -1  
$EndComp
Wire Wire Line
	5200 1100 6250 1100
Connection ~ 5200 1100
Wire Wire Line
	5200 1100 5200 1150
Wire Wire Line
	6250 1100 6250 1300
NoConn ~ 6850 1700
NoConn ~ 6850 3100
NoConn ~ 6850 3200
NoConn ~ 6850 3300
NoConn ~ 6850 3400
NoConn ~ 6850 3500
NoConn ~ 6850 3600
NoConn ~ 6850 3700
NoConn ~ 6850 3800
Wire Wire Line
	2450 1200 2100 1200
Connection ~ 2100 1200
Wire Wire Line
	10150 2850 10150 2950
NoConn ~ 7850 3050
$Comp
L Device:C C6
U 1 1 615149C7
P 10350 1400
F 0 "C6" H 10465 1446 50  0000 L CNN
F 1 "0.1u" H 10465 1355 50  0000 L CNN
F 2 "Capacitor_SMD:C_0603_1608Metric_Pad1.08x0.95mm_HandSolder" H 10388 1250 50  0001 C CNN
F 3 "~" H 10350 1400 50  0001 C CNN
F 4 "C14663" H 10350 1400 50  0001 C CNN "LCSC Part"
	1    10350 1400
	0    1    1    0   
$EndComp
$Comp
L power:GND #PWR018
U 1 1 6151873C
P 10600 1450
F 0 "#PWR018" H 10600 1200 50  0001 C CNN
F 1 "GND" H 10605 1277 50  0000 C CNN
F 2 "" H 10600 1450 50  0001 C CNN
F 3 "" H 10600 1450 50  0001 C CNN
	1    10600 1450
	1    0    0    -1  
$EndComp
$Comp
L Device:R_US R8
U 1 1 61475C0A
P 8900 1750
F 0 "R8" V 9000 1850 50  0000 C CNN
F 1 "5.6k" V 9000 1650 50  0000 C CNN
F 2 "Resistor_SMD:R_0603_1608Metric_Pad0.98x0.95mm_HandSolder" V 8940 1740 50  0001 C CNN
F 3 "~" H 8900 1750 50  0001 C CNN
F 4 "C23189" V 8900 1750 50  0001 C CNN "LCSC Part"
	1    8900 1750
	0    -1   -1   0   
$EndComp
$Comp
L Connector:USB_C_Receptacle_USB2.0 J2
U 1 1 614842D1
P 8150 2150
F 0 "J2" H 8257 3017 50  0000 C CNN
F 1 "USB_C_Receptacle_USB2.0" H 8257 2926 50  0000 C CNN
F 2 "Connector_USB:USB_C_Receptacle_HRO_TYPE-C-31-M-12" H 8300 2150 50  0001 C CNN
F 3 "https://www.usb.org/sites/default/files/documents/usb_type-c.zip" H 8300 2150 50  0001 C CNN
F 4 "C165948" H 8150 2150 50  0001 C CNN "LCSC Part"
F 5 "Korean Hroparts Elec" H 8150 2150 50  0001 C CNN "Manufacturer"
	1    8150 2150
	1    0    0    -1  
$EndComp
$Comp
L Device:R_US R9
U 1 1 6148BC2E
P 8900 1850
F 0 "R9" V 8800 1900 50  0000 C CNN
F 1 "5.6k" V 8800 1750 50  0000 C CNN
F 2 "Resistor_SMD:R_0603_1608Metric_Pad0.98x0.95mm_HandSolder" V 8940 1840 50  0001 C CNN
F 3 "~" H 8900 1850 50  0001 C CNN
F 4 "C23189" V 8900 1850 50  0001 C CNN "LCSC Part"
	1    8900 1850
	0    -1   -1   0   
$EndComp
NoConn ~ 8750 2650
NoConn ~ 8750 2750
Text Label 10550 2650 0    50   ~ 0
UART_RTS
Text Label 10550 2550 0    50   ~ 0
UART_DTR
NoConn ~ 10550 2150
NoConn ~ 10550 2250
NoConn ~ 10550 2350
NoConn ~ 10550 2450
$Comp
L power:+3V3 #PWR020
U 1 1 614B8E45
P 9800 1350
F 0 "#PWR020" H 9800 1200 50  0001 C CNN
F 1 "+3V3" H 9815 1523 50  0000 C CNN
F 2 "" H 9800 1350 50  0001 C CNN
F 3 "" H 9800 1350 50  0001 C CNN
	1    9800 1350
	1    0    0    -1  
$EndComp
Wire Wire Line
	9800 1400 10050 1400
Wire Wire Line
	10050 1650 10050 1400
Connection ~ 10050 1400
Wire Wire Line
	10050 1400 10150 1400
Wire Wire Line
	10150 1650 10150 1400
$Comp
L Device:R_US R10
U 1 1 614D2871
P 7550 4650
F 0 "R10" V 7650 4650 50  0000 C CNN
F 1 "10k" V 7750 4650 50  0000 C CNN
F 2 "Resistor_SMD:R_0603_1608Metric_Pad0.98x0.95mm_HandSolder" V 7590 4640 50  0001 C CNN
F 3 "~" H 7550 4650 50  0001 C CNN
F 4 "C25804" V 7550 4650 50  0001 C CNN "LCSC Part"
	1    7550 4650
	-1   0    0    1   
$EndComp
$Comp
L power:+3V3 #PWR021
U 1 1 614D3316
P 7550 4450
F 0 "#PWR021" H 7550 4300 50  0001 C CNN
F 1 "+3V3" H 7565 4623 50  0000 C CNN
F 2 "" H 7550 4450 50  0001 C CNN
F 3 "" H 7550 4450 50  0001 C CNN
	1    7550 4450
	1    0    0    -1  
$EndComp
$Comp
L Device:C C7
U 1 1 614D4419
P 7900 5250
F 0 "C7" H 8015 5296 50  0000 L CNN
F 1 "0.1u" H 8015 5205 50  0000 L CNN
F 2 "Capacitor_SMD:C_0603_1608Metric_Pad1.08x0.95mm_HandSolder" H 7938 5100 50  0001 C CNN
F 3 "~" H 7900 5250 50  0001 C CNN
F 4 "C14663" H 7900 5250 50  0001 C CNN "LCSC Part"
	1    7900 5250
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR022
U 1 1 614D4B3C
P 7900 5600
F 0 "#PWR022" H 7900 5350 50  0001 C CNN
F 1 "GND" H 7905 5427 50  0000 C CNN
F 2 "" H 7900 5600 50  0001 C CNN
F 3 "" H 7900 5600 50  0001 C CNN
	1    7900 5600
	1    0    0    -1  
$EndComp
Wire Wire Line
	8750 2050 8750 2150
Wire Wire Line
	8750 2250 8750 2350
Wire Wire Line
	9200 1850 9200 1900
Connection ~ 9200 1850
Wire Wire Line
	9050 1850 9200 1850
Wire Wire Line
	9200 1750 9200 1850
Wire Wire Line
	9050 1750 9200 1750
$Comp
L power:GND #PWR013
U 1 1 61481CAC
P 9200 1900
F 0 "#PWR013" H 9200 1650 50  0001 C CNN
F 1 "GND" H 9205 1727 50  0000 C CNN
F 2 "" H 9200 1900 50  0001 C CNN
F 3 "" H 9200 1900 50  0001 C CNN
	1    9200 1900
	1    0    0    -1  
$EndComp
$Comp
L Device:C C5
U 1 1 6150F24C
P 4800 1300
F 0 "C5" H 4915 1346 50  0000 L CNN
F 1 "22u" H 4915 1255 50  0000 L CNN
F 2 "Capacitor_SMD:C_0603_1608Metric_Pad1.08x0.95mm_HandSolder" H 4838 1150 50  0001 C CNN
F 3 "~" H 4800 1300 50  0001 C CNN
F 4 "C59461" H 4800 1300 50  0001 C CNN "LCSC Part"
	1    4800 1300
	1    0    0    -1  
$EndComp
Wire Wire Line
	5200 1100 4800 1100
Wire Wire Line
	4800 1100 4800 1150
Wire Wire Line
	4800 1450 4800 1500
$Comp
L power:GND #PWR0101
U 1 1 61515963
P 4800 1500
F 0 "#PWR0101" H 4800 1250 50  0001 C CNN
F 1 "GND" H 4805 1327 50  0000 C CNN
F 2 "" H 4800 1500 50  0001 C CNN
F 3 "" H 4800 1500 50  0001 C CNN
	1    4800 1500
	1    0    0    -1  
$EndComp
Wire Wire Line
	10600 1450 10600 1400
Wire Wire Line
	10600 1400 10500 1400
Wire Wire Line
	10200 1400 10150 1400
Connection ~ 10150 1400
Wire Wire Line
	9800 1400 9800 1350
Wire Wire Line
	7550 5450 7550 5600
Wire Wire Line
	2950 3100 3600 3100
$Comp
L Device:LED D3
U 1 1 61469D8D
P 4950 5800
F 0 "D3" V 4989 5682 50  0000 R CNN
F 1 "LED" V 4898 5682 50  0000 R CNN
F 2 "LED_SMD:LED_0603_1608Metric_Pad1.05x0.95mm_HandSolder" H 4950 5800 50  0001 C CNN
F 3 "~" H 4950 5800 50  0001 C CNN
F 4 "C2290" V 4950 5800 50  0001 C CNN "LCSC Part"
	1    4950 5800
	0    -1   -1   0   
$EndComp
$Comp
L power:GND #PWR0102
U 1 1 6146B2ED
P 4950 6000
F 0 "#PWR0102" H 4950 5750 50  0001 C CNN
F 1 "GND" V 4955 5872 50  0000 R CNN
F 2 "" H 4950 6000 50  0001 C CNN
F 3 "" H 4950 6000 50  0001 C CNN
	1    4950 6000
	1    0    0    -1  
$EndComp
Wire Wire Line
	4950 5950 4950 6000
$Comp
L Device:R_US R3
U 1 1 6146DFC8
P 4950 5450
F 0 "R3" V 4745 5450 50  0000 C CNN
F 1 "68" V 4836 5450 50  0000 C CNN
F 2 "Resistor_SMD:R_0603_1608Metric_Pad0.98x0.95mm_HandSolder" V 4990 5440 50  0001 C CNN
F 3 "~" H 4950 5450 50  0001 C CNN
F 4 "C27592" V 4950 5450 50  0001 C CNN "LCSC Part"
	1    4950 5450
	-1   0    0    1   
$EndComp
Wire Wire Line
	4950 5600 4950 5650
Wire Wire Line
	4950 5300 4950 5250
$Comp
L power:+3V3 #PWR0103
U 1 1 61478E85
P 4950 5250
F 0 "#PWR0103" H 4950 5100 50  0001 C CNN
F 1 "+3V3" H 4965 5423 50  0000 C CNN
F 2 "" H 4950 5250 50  0001 C CNN
F 3 "" H 4950 5250 50  0001 C CNN
	1    4950 5250
	1    0    0    -1  
$EndComp
$Comp
L Device:LED D4
U 1 1 6147AFF4
P 5550 5800
F 0 "D4" V 5589 5682 50  0000 R CNN
F 1 "LED" V 5498 5682 50  0000 R CNN
F 2 "LED_SMD:LED_0603_1608Metric_Pad1.05x0.95mm_HandSolder" H 5550 5800 50  0001 C CNN
F 3 "~" H 5550 5800 50  0001 C CNN
	1    5550 5800
	0    -1   -1   0   
$EndComp
$Comp
L power:GND #PWR0104
U 1 1 6147AFFA
P 5550 6000
F 0 "#PWR0104" H 5550 5750 50  0001 C CNN
F 1 "GND" V 5555 5872 50  0000 R CNN
F 2 "" H 5550 6000 50  0001 C CNN
F 3 "" H 5550 6000 50  0001 C CNN
	1    5550 6000
	1    0    0    -1  
$EndComp
Wire Wire Line
	5550 5950 5550 6000
$Comp
L Device:R_US R7
U 1 1 6147B001
P 5550 5450
F 0 "R7" V 5345 5450 50  0000 C CNN
F 1 "68" V 5436 5450 50  0000 C CNN
F 2 "Resistor_SMD:R_0603_1608Metric_Pad0.98x0.95mm_HandSolder" V 5590 5440 50  0001 C CNN
F 3 "~" H 5550 5450 50  0001 C CNN
F 4 "C27592" V 5550 5450 50  0001 C CNN "LCSC Part"
	1    5550 5450
	-1   0    0    1   
$EndComp
Wire Wire Line
	5550 5600 5550 5650
Text Label 5550 5150 0    50   ~ 0
METER_LED
Wire Wire Line
	5550 5150 5550 5300
$Comp
L Device:LED D5
U 1 1 61486A66
P 6150 5800
F 0 "D5" V 6189 5682 50  0000 R CNN
F 1 "LED" V 6098 5682 50  0000 R CNN
F 2 "LED_SMD:LED_0603_1608Metric_Pad1.05x0.95mm_HandSolder" H 6150 5800 50  0001 C CNN
F 3 "~" H 6150 5800 50  0001 C CNN
	1    6150 5800
	0    -1   -1   0   
$EndComp
$Comp
L power:GND #PWR0105
U 1 1 61486A6C
P 6150 6000
F 0 "#PWR0105" H 6150 5750 50  0001 C CNN
F 1 "GND" V 6155 5872 50  0000 R CNN
F 2 "" H 6150 6000 50  0001 C CNN
F 3 "" H 6150 6000 50  0001 C CNN
	1    6150 6000
	1    0    0    -1  
$EndComp
Wire Wire Line
	6150 5950 6150 6000
$Comp
L Device:R_US R11
U 1 1 61486A73
P 6150 5450
F 0 "R11" V 5945 5450 50  0000 C CNN
F 1 "68" V 6036 5450 50  0000 C CNN
F 2 "Resistor_SMD:R_0603_1608Metric_Pad0.98x0.95mm_HandSolder" V 6190 5440 50  0001 C CNN
F 3 "~" H 6150 5450 50  0001 C CNN
F 4 "C27592" V 6150 5450 50  0001 C CNN "LCSC Part"
	1    6150 5450
	-1   0    0    1   
$EndComp
Wire Wire Line
	6150 5600 6150 5650
Text Label 6150 5150 0    50   ~ 0
NETWORK_LED
Wire Wire Line
	6150 5150 6150 5300
Text Notes 5650 4800 0    50   ~ 0
Status LEDs
Text Label 6850 2200 0    50   ~ 0
NETWORK_LED
Text Label 6850 2100 0    50   ~ 0
METER_LED
Text Label 6850 2500 0    50   ~ 0
HAN_TO_ESP
Wire Wire Line
	7550 5050 7550 4850
$Comp
L Regulator_Linear:MIC5219-3.3YM5 U1
U 1 1 61792E04
P 2750 1300
F 0 "U1" H 2750 1642 50  0000 C CNN
F 1 "MIC5219-3.3YM5" H 2750 1551 50  0000 C CNN
F 2 "Package_TO_SOT_SMD:SOT-23-5" H 2750 1625 50  0001 C CNN
F 3 "http://ww1.microchip.com/downloads/en/DeviceDoc/MIC5219-500mA-Peak-Output-LDO-Regulator-DS20006021A.pdf" H 2750 1300 50  0001 C CNN
F 4 "False" H 2750 1300 50  0001 C CNN "JLCPCB BOM"
	1    2750 1300
	1    0    0    -1  
$EndComp
Wire Wire Line
	3050 1200 3700 1200
Wire Wire Line
	3200 1750 3200 1950
Wire Wire Line
	3050 1300 3200 1300
Wire Wire Line
	3200 1300 3200 1450
$Comp
L power:GND #PWR0107
U 1 1 6179C1DF
P 3700 1950
F 0 "#PWR0107" H 3700 1700 50  0001 C CNN
F 1 "GND" H 3705 1777 50  0000 C CNN
F 2 "" H 3700 1950 50  0001 C CNN
F 3 "" H 3700 1950 50  0001 C CNN
	1    3700 1950
	1    0    0    -1  
$EndComp
Wire Wire Line
	3700 1750 3700 1950
Wire Wire Line
	2100 1300 2450 1300
$Comp
L Connector:6P6C J1
U 1 1 60EAA07E
P 1250 3500
F 0 "J1" H 1307 4067 50  0000 C CNN
F 1 "6P6C" H 1307 3976 50  0000 C CNN
F 2 "Connector_RJ:RJ12_Amphenol_54601" V 1250 3525 50  0001 C CNN
F 3 "~" V 1250 3525 50  0001 C CNN
F 4 "C305981" H 1250 3500 50  0001 C CNN "LCSC Part"
	1    1250 3500
	1    0    0    -1  
$EndComp
$Comp
L Interface_USB:CH340C U4
U 1 1 61791223
P 10150 2250
F 0 "U4" H 9700 3000 50  0000 C CNN
F 1 "CH340B (or C)" H 9700 2900 50  0000 C CNN
F 2 "Package_SO:SOIC-16_3.9x9.9mm_P1.27mm" H 10200 1700 50  0001 L CNN
F 3 "https://datasheet.lcsc.com/szlcsc/Jiangsu-Qin-Heng-CH340C_C84681.pdf" H 9800 3050 50  0001 C CNN
F 4 "C81010" H 10150 2250 50  0001 C CNN "LCSC Part"
	1    10150 2250
	1    0    0    -1  
$EndComp
$Comp
L power:+3V3 #PWR011
U 1 1 60F24534
P 4800 1000
F 0 "#PWR011" H 4800 850 50  0001 C CNN
F 1 "+3V3" H 4815 1173 50  0000 C CNN
F 2 "" H 4800 1000 50  0001 C CNN
F 3 "" H 4800 1000 50  0001 C CNN
	1    4800 1000
	1    0    0    -1  
$EndComp
Wire Wire Line
	4800 1000 4800 1100
Connection ~ 4800 1100
$Comp
L power:VCC #PWR0106
U 1 1 617DF9F1
P 2000 1100
F 0 "#PWR0106" H 2000 950 50  0001 C CNN
F 1 "VCC" H 2015 1273 50  0000 C CNN
F 2 "" H 2000 1100 50  0001 C CNN
F 3 "" H 2000 1100 50  0001 C CNN
	1    2000 1100
	1    0    0    -1  
$EndComp
Wire Wire Line
	2000 1100 2000 1200
Connection ~ 2000 1200
Wire Wire Line
	2000 1200 2100 1200
Wire Wire Line
	7550 4450 7550 4500
Wire Wire Line
	7550 4800 7550 4850
Connection ~ 7550 4850
Wire Wire Line
	7900 5400 7900 5600
$Comp
L Switch:SW_Push SW1
U 1 1 61109F2A
P 7550 5250
F 0 "SW1" V 7596 5202 50  0000 R CNN
F 1 "SW_Push" V 7505 5202 50  0000 R CNN
F 2 "footprints:TE_Connectivity_FSM2JSMAA" H 7550 5450 50  0001 C CNN
F 3 "~" H 7550 5450 50  0001 C CNN
F 4 "C127509" V 7550 5250 50  0001 C CNN "LCSC Part"
	1    7550 5250
	0    1    1    0   
$EndComp
Wire Wire Line
	7550 4850 7900 4850
Wire Wire Line
	7900 5100 7900 4850
Connection ~ 7900 4850
Wire Wire Line
	7900 4850 8000 4850
Text Notes 8950 4100 0    39   Italic 0
https://github.com/espressif/esptool/wiki/\nESP32-Boot-Mode-Selection#automatic-bootloader
$EndSCHEMATC
